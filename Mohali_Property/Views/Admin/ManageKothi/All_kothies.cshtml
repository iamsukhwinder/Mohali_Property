
<div id="div1">
    <h3>List of All Kothies</h3>
    <table id="kothitable" name="kothitable" class="display responsive">
        <thead>
            <tr>

                <th>Kothi_id</th>
                <th>Kothi Number</th>
                <th>Block</th>
                <th>Kothi Size</th>
                <th>Unit</th>
                <th>Denomination</th>
                <th>Unit rate</th>
                <th>Price</th>
                <th>Token Amount</th>
                <th>Action</th>



            </tr>
        </thead>

    </table>
</div>



@*edit modal*@
<div class="modal fade" id="EditProdModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Edit Kothi</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" onclick="EditCloseModal()" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="editModalBody">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="EditCloseModal()" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-warning" onclick="return Update()" id="editProduct">Update changes</button>
            </div>
        </div>
    </div>
</div>















<script>


    $(function () {
        getkothies();
    });
    function getkothies() {
        $.ajax({
            type: "GET",
            url: "/Kothi/getkothieslist",
            success: function (data) {
                debugger;
                $('#kothitable').DataTable().clear().destroy();

                $('#kothitable').dataTable({
                    processing: true,

                    "aaData": data,
                    "order": [[0, 'desc']],
                    "columns": [
                        //{
                        //    "data": "id",
                        //    visible: false,
                        //    searchable: false,
                        //},

                        { "data": "kothi_id" },
                        { "data": "kothi_Number" },
                        { "data": "block" },
                        { "data": "kothi_size" },
                        { "data": "kothi_unit" },
                        { "data": "dimension" },
                        { "data": "unit_rate" },
                        { "data": "price" },
                        { "data": "token_amount" },
                        {
                            "mRender": function (data, type, row) {
                                //return ' <a id="btneditproduct" onclick="showeditcompanymodal(' + row.company_id + ')"  title="Edit" class="btn-text-size btn btn-primary btneditproduct" data-id=' + row.id + '>Edit</a>';
                                //return ' <a   class="btn-text-size " href="/Admin/editProduct/' + row.id+'" >Edit</a>';
                                return '<img src="/Image/edit.png"  height="20" width="20"  id="btneditproduct" onclick="showeditcompanymodal(' + row.kothi_id + ')"  title="Edit"  data-id=' + row.company_id + '>&nbsp;&nbsp;&nbsp;&nbsp; <img src="/Image/delete.png"  height="20" width="20"  id="btneditproduct" onclick="deletecompanydetail(' + row.kothi_id + ')"  title="Delete"  data-id=' + row.company_id + '>'
                            }

                        },







                    ]
                })

            },
            failure: function (response) {
                alert(response.responseText);
            },
            error: function (response) {
                alert(response.responseText);
            }
        });
    }



    //it show the comopanydetail in editing mode

    function showeditcompanymodal(id) {
        $.get("/Kothi/Edit_kothi/" + id,
      
            function (res) {
                debugger;
                if (res) {
                    $('#editModalBody').html(res);
                } else {
                    alert("Unsuccessful");
                }

            });

        $('#EditProdModal').modal("show");
    };

    



    function Update() {
        var result = validate();
        if (result == false) {
            return false;
        }
        else{
            var valdata = $("#edit_kothi_form").serialize();
          //  alert(valdata);
            $.ajax({
                url: '/Kothi/update_kothi',
                type: "post",
                dataType: 'json',
                processData: false,

                contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                data: valdata,

                success: function (res) {

                    if (res == 1) {

                        alert("Kothi Updated successfully");

                    }
                    else {
                        alert("Please try again");

                    }
                }
            });
           }

        }
        



    function EditCloseModal() {
        $('#EditProdModal').modal("hide");
    }


    function deletecompanydetail(id) {
        var result = confirm("Are you sure want to delete?")
        if (result) {
            $.ajax({
                type: "GET",
                url: "/Kothi/delete_kothi/" + id,
                success: function (data) {
                    debugger;
                    alert("Company details deleted");
                    getCompanies();

                },

                failure: function (response) {
                    alert(response.responseText);
                },
                error: function (response) {
                    alert(response.responseText);
                }

            });
        }


    }



        function validate() {

            var result = true;

        var kothino = $("#kothi_Number").val();
            debugger;
        if (kothino == "") {
                debugger;
                result = false;


                $("#ekothinumber").html("please enter  Kothi Number");

            }
            else {
              
                $("#ekothinumber").html("");
            }



        var kothiblock = $("#block").val();

        if (kothiblock == "") {
                result = false;
            $("#eblock").html("please enter Block ");
            }
            else {
            $("#eblock").html("");
            }



        var denonimation = $("#dimension").val();

        if (denonimation == "") {
                result = false

                $("#edenomination").html("please enter Denomination ");

            }
            else {
                $("#edenomination").html("");
                
            }



        var kothiunit = $("#kothi_unit").val();

        if (kothiunit == "") {
                result = false;
                $("#ekothiunit").html("please enter Kothi Unit ");

            }
            else {
                $("#ekothiunit").html("");

                
            }



        var kothisize = $("#kothi_size").val();

        if (kothisize == "") {
                result = false;
                $("#ekothisize").html("please enter Kothi Size ");
                
            }
            else {

                $("#ekothisize").html("");
            }



        var unitrate = $("#unit_rate").val();

        if (unitrate == "") {
                result = false;
                $("#eunitrate").html("please enter Unit rate ");

            }
            else {
                $("#eunitrate").html("");

            }



        var price = $("#price").val();

        if (price == "") {
                result = false;
                $("#eprice").html("please enter Price ");

            }
            else {
                $("#eprice").html("");

            }



        var bookingAmount = $("#booking_amount").val();
            if (bookingAmount == "") {
                result = false;


                $("#ebookingamount").html("please enter booking Amount ");
            }
            else {
                $("#ebookingamount").html("");
            }
        

      

        var tokenamount = $("#token_amount").val();

        if (tokenamount == "") {
            result = false;

            $("#etokenamount").html("please enter Token Amount ");
        }
        else {
            $("#etokenamount").html("");;
        }



        var status = $("#status").val();
        if (status == "choose...") {
            result = false;
            $("#estatus").html("please enter status");

        }
        else {
            $("#estatus").html("");


        }



    return result;
            }












</script>